@using ClientDependency.Core.Mvc
@{
    Html.RequiresJs("https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.js");
    var querystringFromDate = Request.QueryString["fromDate"];
    var querystringToDate = Request.QueryString["toDate"];
    var fromDate = string.IsNullOrWhiteSpace(querystringFromDate) ? DateTime.Now.AddDays(-365*1) : DateTime.Parse(querystringFromDate);
    var toDate = string.IsNullOrWhiteSpace(querystringToDate) ? DateTime.Now : DateTime.Parse(querystringToDate);
    var url = Html.Raw(Url.Action("Statistics", "Statistics", new { fromDate = fromDate, toDate = toDate }));
}

<script type="text/javascript">
    $(document).ready(function () {
        console.log("@url");
        try {
            $("#forum-statistics").load("@url");
        } catch (errForum) {
            console.log("Couldn't load latest forum statistics", errForum.message);
        }
    });
</script>
